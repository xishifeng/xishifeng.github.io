<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />
		<meta name="Keywords" content="" />
		<meta name="Description" content="" />
		<meta name="author" content="xishifeng" />
		<link rel="icon" type="image/x-icon" href="img/favicon_guojia.ico" />
		<link rel="stylesheet" href="css/reset_170324.css" />
		<script type="text/javascript" src="js/libs/rem750_1.js"></script>
		<style type="text/css">
			header {
				background-color: #669acc;
				overflow: hidden;
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 1rem;
				line-height: 1rem;
				text-align: center;
				font-size: 0.6rem;
				color: white;
				z-index: 3;
			}
			
			.header_pic{
				width: 1rem;
				position: absolute;
				left: 0;
				top: 0;
				border-radius: 0.5rem;
			}
			
			a.contents {
				position: fixed;
				width: 1.2rem;
				height: 1.2rem;
				line-height: 1.2rem;
				border-radius: 50%;
				right: 0.5rem;
				bottom: 0.5rem;
				font-size: 0.3rem;
				text-align: center;
				background-color: rgba(153, 205, 255, .9);
				box-shadow: 0.1rem 0.1rem 0.1rem rgba(0, 0, 0, .6);
			}
			
			nav {
				position: fixed;
				padding: 0.2rem 0;
				top: 1rem;
				left: 0;
				width: 100%;
				z-index: 2;
				/*层级必须设置，不然鼠标点击不到这个元素*/
			}
			
			nav>section {
				width: 25%;
				height: 0.8rem;
				line-height: 0.8rem;
				text-align: center;
				float: left;
				font-size: 0.28rem;
				background-color: rgba(205, 255, 254, .6);
			}
			
			nav>section.active {
				background-color: #99cdff;
			}
			
			div.explain_details {
				position: fixed;
				box-sizing: border-box;
				left: 7.5rem;
				top: 0;
				width: 7.5rem;
				height: 100%;
				background-color: white;
				z-index: 2;
				padding-top: 1.2rem;
			}
			div.explain_details>p{
				text-indent: 0.5em;
				font-size: 0.36rem;
				color: #666;
				line-height: 0.48rem;
			}
			#details_back{
				background-color: orange;
				display: block;
				border: none;
				width: 1.2rem;
				height: 1.2rem;
				box-shadow: 0.1rem 0.1rem 0.1rem rgba(0, 0, 0, .6);
				border-radius: 50%;
				text-align: center;
				line-height: 1.2rem;
				position: absolute;
				right: 0.5rem;
				bottom: 0.5rem;
				font-size: 0.4rem;;
				color: white;
			}
			
			main {
				padding-top: 2.2rem;
				position: relative;
				height: 6.4rem;
				overflow: hidden;
			}
			
			main>div.ul_box {
				width: 30rem;
				position: absolute;
				left: 0;
				top: 2.2rem;
			}
			
			main>div.ul_box>ul {
				float: left;
				width: 7.5rem;
				height: 6.4rem;
			}
			main>div.ul_box>ul:nth-of-type(1){
				background: url(img/xuemei_xiaoqiao.jpg) no-repeat center center;
				background-size: 7.5rem;
			}
			main>div.ul_box>ul:nth-of-type(2){
				background: url(img/zhugeliang.jpg) no-repeat center center;
				background-size: 7.5rem;
			}
			main>div.ul_box>ul:nth-of-type(3){
				background: url(img/zhenji.jpg) no-repeat center center;
				background-size: 7.5rem;
			}
			main>div.ul_box>ul:nth-of-type(4){
				background: url(img/guojia.jpg) no-repeat center center;
				background-size: 7.5rem;
			}
			
			.main_area>li {
				overflow: hidden;
				height: 0.8rem;
				box-sizing: border-box;
				width: 100%;
			}
			
			.main_area>li+li {
				border-top: 1px solid #999;
			}
			
			.main_area>li>div {
				float: left;
				height: 0.8rem;
				line-height: 0.8rem;
			}
			
			.main_area>li>div.order {
				width: 0.8rem;
				text-align: center;
				font-size: 0.7rem;
				background-color: rgba(0,0,255,.2);
			}
			
			.main_area>li>div.treasure_box {
				width: 6.7rem;
				font-size: 0.3rem;
				color: #666;
				position: relative;
			}
			.main_area>li>div.treasure_box.active {
				background-color: rgba(0,0,0,.02);
			}
			.main_area>li>div.treasure_box.active::after {
				content: "(^_^)";
				display: inline-block;
				color: blueviolet;
				padding-left: 0.5em;
			}
			
			#clear{
				position: fixed;
				bottom: 0.5rem;
				left: 0.5rem;
				font-size: 0.3rem;
				background-color: #ccc;
				width: 2rem;
				height: 1rem;
				line-height: 1rem;
				text-align: center;
				border-radius: 0.5rem 0;
			}
			
			span#xiezi{
				position: absolute;
				right: 0.3rem;
				top: 0;
				height: 0.8rem;
				line-height: 0.8rem;
				font-size: 0.28rem;
			}
		</style>
	</head>

	<body>
		<header><img class="header_pic" src="img/header_jiaxu.jpg" />觉醒宝箱记录</header>
		<a class="contents">explain</a>
		
		<a href="javascript:;" onclick="delJiLu()" id="clear">清除记录</a>
		<nav>
			<section>7,10(一)</section>
			<section>7,10(二)</section>
			<section>2,10(三)</section>
			<section>4(四)</section>
		</nav>

		<main id="main">
			<div class="ul_box">
				<ul class="main_area" data-eq="0">
					<li>
						<div class="order">1</div>
						<div class="treasure_box">E</div>
					</li>
					<li>
						<div class="order">2</div>
						<div class="treasure_box">B</div>
					</li>
					<li>
						<div class="order">3</div>
						<div class="treasure_box">E</div>
					</li>
					<li>
						<div class="order">4</div>
						<div class="treasure_box">E</div>
					</li>
					<li>
						<div class="order">5</div>
						<div class="treasure_box">D</div>
					</li>
					<li>
						<div class="order">6</div>
						<div class="treasure_box">D</div>
					</li>
					<li>
						<div class="order">7</div>
						<div class="treasure_box">C</div>
					</li>
					<li>
						<div class="order">8</div>
						<div class="treasure_box">CDDCEEECDC</div>
					</li>
				</ul>
				<ul class="main_area" data-eq="1">
					<li>
						<div class="order">1</div>
						<div class="treasure_box">D</div>
					</li>
					<li>
						<div class="order">2</div>
						<div class="treasure_box">D</div>
					</li>
					<li>
						<div class="order">3</div>
						<div class="treasure_box">C</div>
					</li>
					<li>
						<div class="order">4</div>
						<div class="treasure_box">E</div>
					</li>
					<li>
						<div class="order">5</div>
						<div class="treasure_box">E</div>
					</li>
					<li>
						<div class="order">6</div>
						<div class="treasure_box">E</div>
					</li>
					<li>
						<div class="order">7</div>
						<div class="treasure_box">C</div>
					</li>
					<li>
						<div class="order">8</div>
						<div class="treasure_box">DBCEDDEEDB</div>
					</li>
				</ul>
				<ul class="main_area" data-eq="2">
					<li>
						<div class="order">1</div>
						<div class="treasure_box">B</div>
					</li>
					<li>
						<div class="order">2</div>
						<div class="treasure_box">C</div>
					</li>
					<li>
						<div class="order">3</div>
						<div class="treasure_box">DCCEAEBEED</div>
					</li>
				</ul>
				<ul class="main_area" data-eq="3">
					<li>
						<div class="order">1</div>
						<div class="treasure_box">C</div>
					</li>
					<li>
						<div class="order">2</div>
						<div class="treasure_box">C</div>
					</li>
					<li>
						<div class="order">3</div>
						<div class="treasure_box">E</div>
					</li>
					<li>
						<div class="order">4</div>
						<div class="treasure_box">A</div>
					</li>
				</ul>
			</div>

		</main>

		<div class="explain_details">
			<p>A：完整宝物，10九锡；</p>
			<p>B：宝物碎片，万能碎片，2九锡；</p>
			<p>C：武将魂魄，1九锡，三级宝石箱；</p>
			<p>D：50元宝，30灵芝，10铸铁，二级宝石箱，10勾玉；</p>
			<p>E：30元宝，20元宝，10灵芝，普通传承符。</p>

			<p id="complete_order"></p>
			<p>模板：E*3 + D*2 + C*1 + B*1 + A*1</p>
			
			<button id="details_back">Back</button>
		</div>

		<script type="text/javascript" src="js/libs/jquery.min.js"></script>
		<script type="text/javascript">
			var order = {
				originList: "EBEEDDCEEEDEBBEECDDCEEECDCEEEBEEDDBCEDDEEDBEEDCCEA",
				method: "7,10,7,10,2,10,4",
				listNum: [8, 8, 3, 4],
				onceList: {
					arr0: ["E", "B", "E", "E", "D", "D", "C", "CDDCEEECDC"],
					arr1: ["D", "D", "C", "E", "E", "E", "C", "DBCEDDEEDB"],
					arr2: ["B", "C", "DCCEAEBEED"],
					arr3: ["C", "C", "E", "A"]
				}
			};
			
			//删除相关的存储localStorage
			function delJiLu(){
				if(confirm("确认清除吗？")){
					localStorage.removeItem("last_time");
					localStorage.removeItem("index_page");
					localStorage.removeItem("index_li");
				}else{
					return false;
				}
				
			}
			
			//对时间数据的解析
			function timeJieXi(str){
				var timeTemp = new Date(Number(str));
				var year = timeTemp.getFullYear();
				var moon = timeTemp.getMonth() + 1;
				var _date = timeTemp.getDate();
				var hour = timeTemp.getHours();
				var mini = timeTemp.getMinutes();
				var second = timeTemp.getSeconds();
				return year +"年"+moon +"月"+_date +"日;"+quZheng(hour) +":"+quZheng(mini) +":"+quZheng(second);
			}
			
			//对时分秒的取整
			function quZheng(num){
				return num<10?("0"+num):num;
			}

			$(function() {
				var index_page_ori = localStorage.getItem("index_page");
				var index_li_ori = localStorage.getItem("index_li");
				var last_time_ori = localStorage.getItem("last_time");
				
				var box = $(".ul_box");
				var navSec = $("nav>section");
				var ul = $(".main_area");
				var details_area = $(".explain_details");
				
				if(last_time_ori){
					navSec.removeClass("active").eq(index_page_ori).addClass("active");
					box.animate({"left":"-"+(index_page_ori*7.5)+"rem"},0);
					ul.each(function(i,v){
						if(i<index_page_ori){
							$(v).find('li>.treasure_box').addClass('active');
						}else if(i == index_page_ori){
							$(v).find('li>.treasure_box').each(function(ii,vv){
								if(ii<index_li_ori){
									$(vv).addClass("active");
								}else if(ii == index_li_ori){
									$(vv).addClass("active").append($('<span id="xiezi">&lt;'+timeJieXi(last_time_ori)+'&gt</span>'));
								}
							})
						}
					});
				}
				
				$(".treasure_box").on("click",function(){
					var _this = $(this);
					var eq_page = _this.parent().parent().data("eq");
					var eq_li = _this.parent().index();
					
					var index_page_new = localStorage.getItem("index_page");
					var index_li_new = localStorage.getItem("li");
					var last_time_new = localStorage.getItem("last_time");
					
					var time = new Date();
					if(last_time_new !== null){
						var yue = new Date(Number(last_time_new)).getMonth();
						var ri = new Date(Number(last_time_new)).getDate();
						console.log(yue);
						console.log(ri);
						if(yue == time.getMonth() && ri == time.getDate()){
							if(confirm("确认更新序列吗？")){
								localStorage.setItem("last_time",time.getTime());
								localStorage.setItem("index_page",eq_page);
								localStorage.setItem("index_li",eq_li);
							}
						}
					}else{
						localStorage.setItem("last_time",time.getTime());
						localStorage.setItem("index_page",eq_page);
						localStorage.setItem("index_li",eq_li);
					}
					
					location.reload(true);//设置为true，不从缓存中重载
				});
				
				navSec.on("click", function() {
					var _this = $(this);
					var index = _this.index();
					_this.addClass("active").siblings().removeClass("active");
					console.log(index);
					box.animate({"left":"-"+(index*7.5)+"rem"},200);
				});
				
				$("#details_back").click(function(e){
					e.preventDefault();
					details_area.animate({"left":7.5+"rem"},300);
				});
				
				$(".contents").click(function(e){
					e.preventDefault();
					details_area.animate({"left":0+"rem"},300);
				})
			});
		</script>
	</body>

</html>

<!--		
‌A：完整宝物，10九锡；
B：宝物碎片，万能碎片，2九锡；
C：武将魂魄，1九锡，三级宝石箱；
D：50元宝，30灵芝，10铸铁，二级宝石箱，10勾玉；
E：30元宝，20元宝，10灵芝，普通传承符。
序列：EBEEDDCEEEDEBBEECDDCEEECDCEEEBEEDDBCEDDEEDBEEDCCEA

EBEEDDC  单7
CDDCEEECDC
DDCEEEC  单7    3.5EEE
DBCEDDEEDB
BC  单2
DCCEAEBEED
CCEA  单4	
-->